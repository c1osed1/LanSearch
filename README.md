# Changelog - LanSearch Extension (Chrome)



## Version 1.3.0 - 10-08-2025

### Новые функции
- **Система проверки обновлений**: Добавлена кнопка проверки обновлений в popup, которая проверяет последний коммит с GitHub
- **Автоматическая проверка**: При открытии popup автоматически проверяется наличие обновлений
- **Скачивание обновлений**: Кнопка для скачивания последней версии с GitHub

### Технические детали
- Интеграция с GitHub API для получения информации о последних коммитах
- Сохранение информации о последнем известном коммите в chrome.storage.local
- Сравнение дат коммитов для определения наличия обновлений
- Добавлено разрешение для доступа к api.github.com



## Version 1.2.5 - 10-08-2025

## Визуал
- Перемещение поиска в Аккордион

## Version 1.2.0 - 10-08-2025
### Критические изменения
- **Переход на chrome.storage.local**: Заменен localStorage на chrome.storage.local для обеспечения общего доступа к данным избранных и недавних вкладок на всех подходящих доменах
- **Добавлено разрешение storage**: В manifest.json добавлено разрешение "storage" для доступа к API хранилища расширения

### Исправления
- **Кросс-доменное хранение**: Теперь избранные и недавние вкладки сохраняются глобально в расширении и доступны на всех доменах с "langame" или "cls"
- **Асинхронные операции**: Все операции с хранилищем теперь асинхронные для корректной работы с chrome.storage.local
- **Безопасность**: Заменены все использования innerHTML на textContent для предотвращения XSS атак

### Технические детали
- Использование Promise-based API для всех операций с хранилищем
- Обновлены методы: getRecentTabs(), getFavoriteTabs(), addToFavorites(), removeFromFavorites(), isFavorite()
- Сохранена обратная совместимость с существующими функциями
- Все эмодзи иконки теперь устанавливаются через textContent вместо innerHTML


### Новые функции
- **Отслеживание последних вкладок**: Автоматическое сохранение последних 10 использованных вкладок
- **Система избранных**: Возможность добавлять до 5 вкладок в избранное с помощью звездочки
- **Отображение на главной странице**: Секция "Последние используемые вкладки" между оплатой и предложениями партнеров
- **Интерфейс popup**: Отображение недавних и избранных вкладок в popup расширения
- **Централизованное определение доменов**: Функции для определения подходящих доменов (langame, cls) и их поддоменов

### Изменения
- **manifest.json**: Добавлен recent-tabs.js в content_scripts
- **content.js**: Интеграция с RecentTabsManager для отслеживания и отображения
- **background.js**: Упрощен, popup теперь управляет активацией
- **recent-tabs.js**: Новый модуль для управления вкладками с функциями определения доменов

### Технические детали
- Использование localStorage для хранения данных
- Извлечение иконок из CSS :before стилей
- Fallback на эмодзи иконки
- Hover эффекты и уведомления
- Модульная архитектура с RecentTabsManager классом

### Структура файлов
```
LanSearch/
├── manifest.json
├── popup.html
├── popup.js
├── content.js
├── background.js
├── recent-tabs.js
└── icons/
```

### Функции определения доменов
- `isSuitableDomain(hostname)` - проверка конкретного домена
- `getCurrentDomain()` - получение текущего домена
- `isCurrentDomainSuitable()` - проверка текущего домена
- `getSuitableDomains()` - список всех подходящих доменов
- `isSuitableDomainWithSubdomains(hostname)` - проверка с учетом поддоменов
